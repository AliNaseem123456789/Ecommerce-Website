(m=>{var u=window.minimog.Helpers;m(document).ready(function(){var e,s,d,r,n,t;e=m("#minimog-wc-question"),s=m(".woocommerce-noreviews",e),d=m(".question-list-container",e),r=m(".question-list",e),m(document.body).on("submit",".question-form",function(e){e.preventDefault();var n=m(this),t=n.find('button[type="submit"]'),o=m("[name=question]",n),a=parseInt(m("input[name=question_parent_id]",n).val()),i=parseInt(m(".question-count",d).html());m.ajax({url:$minimog.ajaxurl,type:"POST",cache:!1,dataType:"json",data:n.serialize(),success:function(e){var t;(e.success?(a?((t=m(".children","#li-comment-"+a)).length?t.prepend(e.data.response):(t=m('<ol class="children" />')).appendTo("#li-comment-"+a).html(e.data.response),m(document.body).trigger("minimog_product_question_child_added",[a])):(i+=1,s.length&&s.remove(),r.prepend(e.data.response)),t=1===i?e.data.single_text:e.data.plural_text,m(".question-count",d).html(i),m(".question-text",d).html(t),o.val(""),m(document.body).trigger("minimog_product_question_added",[e.data,!0]),n.find(".question-form-message-box").addClass("success")):n.find(".question-form-message-box").addClass("failed")).text(e.data.message).slideDown()},beforeSend:function(){n.find(".question-form-message-box").text("").removeClass("failed success").slideUp(),u.setElementHandling(t)},complete:function(){u.unsetElementHandling(t)}})}),m(document.body).on("click",".question-reply",function(e){e.preventDefault();var e=m(this),t=e.data("question-id"),n=m("#modal-product-question"),o=n.find(".modal-title"),a=n.find(".question-form-message-box"),i=n.find('input[name="question_parent_id"]'),e=e.closest(".comment-footer").siblings(".meta").children(".fn").text(),s=n.data("reply-title");a.removeClass("success failed").text(""),s=s.replace("{comment_author_name}",e),o.text(s),n.MinimogModal("open"),i.val(t)}),n=m("#minimog-wc-question"),(t=m(".question-search-form",n)).on("submit",function(e){return e.preventDefault(),m.ajax({url:$minimog.ajaxurl,type:"GET",data:t.serialize(),dataType:"json",cache:!0,success:function(e){e.data.fragments&&(m.each(e.data.fragments,function(e,t){m(e).empty(),""!==t&&(t=m.trim(t),t=m(m.parseHTML(t)),m(e).html(t.html()))}),m(document.body).trigger("minimog_get_product_questions_fragments_loaded"))},beforeSend:function(){u.setBodyHandling();var e=0,t=m(".question-toolbar",n).offset().top;t-=e=m(document.body).hasClass("header-sticky-enable")?m("#page-header").outerHeight():e,m("html, body").animate({scrollTop:t},800)},complete:function(){u.setBodyCompleted()}}),!1}),m(document.body).on("click",".question-navigation a",function(e){e.preventDefault();e=u.getUrlParamsAsObject(m(this).attr("href")),e=e?e.current_page:1;t.find('input[name="current_page"]').val(e),t.trigger("submit")})})})(jQuery);